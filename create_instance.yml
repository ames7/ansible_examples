---
  - name: create_instance
    hosts: localhost
    gather_facts: true
    vars: 
       ec2_vpc_subnet_id: ''
       ami_id: ''
       key_pair_name: ''
    
    
    tasks:
     - name: start an instance with a public IP address
       amazon.aws.ec2_instance:
         name: "gonzalo_instance1"
         key_name: "{{ key_pair_name }}"
         vpc_subnet_id: "{{ ec2_vpc_subnet_id }}"
         instance_type: t2.2xlarge
         security_group: default
         network:
           assign_public_ip: true
         image_id: "{{ ami_id }}"
         region: us-east-1
         tags:
           Environment: Testing
